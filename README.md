# Code-for-Arduino-
byte a=0; #include&lt;TimerOne.h> #define vcc_sensor 13 #define PIR1 11 #define PIR2 10 #include &lt;SoftwareSerial.h> SoftwareSerial mySerial(3, 2); #define sensor A0 #define buzzer 5 #define pump 9 #define trig 8 #define echo 7 boolean count = 0; void setup() {   Serial.begin(9600);   pinMode(sensor,INPUT);   pinMode(buzzer,OUTPUT);   pinMode(vcc_sensor,OUTPUT);   digitalWrite(vcc_sensor,HIGH);   mySerial.begin(9600);   Serial.println("Initializing...");   mySerial.println("AT");   updateSerial();   pinMode(trig,OUTPUT);   pinMode(echo,INPUT);   pinMode(12,OUTPUT);   digitalWrite(12,HIGH);   pinMode(13,OUTPUT);   digitalWrite(13,HIGH);   pinMode(PIR1,INPUT);   pinMode(PIR2,INPUT);   Timer1.initialize(60000000);   Timer1.attachInterrupt(function_off);   noInterrupts();   pinMode(4,OUTPUT);   digitalWrite(4,HIGH); } void loop(void) {   Auto_order_rice();   Auto_turn_off();   Fire_alarm(); } void function_off() {   digitalWrite(12,LOW);   Serial.println("Interrupt"); } void Fire_alarm() {    int smoking_value = analogRead(sensor);   if(smoking_value > 200){     tone(buzzer,400,200);     digitalWrite(pump,HIGH);     Serial.println("Fire, fire, fire!!!");     mySerial.println("AT+CMGF=1");     updateSerial();     mySerial.println("AT+CMGS=\"+84905248242\"");     updateSerial();     mySerial.print("Your home is FIRE");     updateSerial();     mySerial.write(26);     digitalWrite(vcc_sensor,LOW);     digitalWrite(4,LOW);     digitalWrite(12,LOW);   }   else{     noTone(buzzer);     digitalWrite(pump,LOW);     digitalWrite(4,HIGH);     Serial.println("Not found Fire");   } } void updateSerial() {   delay(500);   while (Serial.available())   {     mySerial.write(Serial.read());//Forward what Serial received to Software Serial Port   }   while(mySerial.available())   {     Serial.write(mySerial.read());//Forward what Software Serial received to Serial Port   } } void Auto_order_rice() {     unsigned long duration;   int distance;   digitalWrite(trig,LOW);   delayMicroseconds(2);   digitalWrite(trig,HIGH);   delayMicroseconds(5);   digitalWrite(trig,LOW);   duration= pulseIn(echo,HIGH);   distance= int (duration/2/29.412);   Serial.print(distance);   Serial.println("cm");   if (distance == 5)   {     if(count == 0)     {       mySerial.println("AT+CMGF=1");       updateSerial();       mySerial.println("AT+CMGS=\"+84905248242\"");       updateSerial();       mySerial.print("Order me 1 bag of rice. At 671 Ton Duc Thang");       updateSerial();       mySerial.write(26);       count = 1;     }     else     {       count = 0;     }   } } void Auto_turn_off(void) {   if(digitalRead(PIR2) == HIGH)   {     a =  a + 1;   }   if(digitalRead(PIR1) == HIGH)   {     a = a + 1;   }   if (a == 0)   {     interrupts();     Serial.println("HIGH");   }   if (a != 0 )   {     noInterrupts();     Serial.println("LOW");     digitalWrite(12,HIGH);   }   a = 0; }
